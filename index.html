<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Orrery</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: black; /* Background color */
            color: white; /* Default text color */
            font-family: Arial, sans-serif;
        }
        #zoom-level {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            color: white;
            font-size: 18px;
        }
        #fps {
            position: absolute;
            top: 30px;
            left: 10px;
            z-index: 100;
            color: white;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <canvas id="orreryCanvas"></canvas>
    <div id="zoom-level">Zoom: 100%</div>
    <div id="fps">FPS: 0</div>

    <script>
        const canvas = document.getElementById('orreryCanvas');
        const ctx = canvas.getContext('2d');

        // Resize canvas to fit the window
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Define Earth at the center
        const earth = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 20,
            color: 'blue'
        };

        // Define other planets
        const planets = [
        { name: 'sun', distance: 0, radius:40, color: 'orange', speed: 0 },
            { name: 'Mercury', distance: 60, radius: 5, color: 'gray', speed: 2 },
            { name: 'Venus', distance: 90, radius: 8, color: 'yellow', speed:  1.5},
            { name: 'Earth', distance: 130, radius: 20, color: 'blue', speed: 1 },
            { name: 'Moon', distance: 150, radius: 5, color: 'white', speed: 2 },
            { name: 'Mars', distance: 180, radius: 7, color: 'red', speed: 0.9 },
            { name: 'Jupiter', distance: 220, radius: 12, color: 'brown', speed: 0.65 },
            { name: 'Saturn', distance: 270, radius: 10, color: 'gold', speed: 0.6 },
            { name: 'Uranus', distance: 320, radius: 9, color: 'lightblue', speed: 0.5 },
            { name: 'Neptune', distance: 360, radius: 8, color: 'darkblue', speed: 0.4 },
        ];

        // Define stars
        const stars = [];
        for (let i = 0; i < 100; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                radius: Math.random() * 1.5 + 0.5, // Increase minimum star size
                color: `rgba(255, 255, 255, ${Math.random()})` // Random opacity for twinkling effect
            });
        }

        // Zoom and panning variables
        let scale = 1;
        const scaleFactor = 1.1;
        const minScale = 0.5;
        const maxScale = 3;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        let offsetX = 0;
        let offsetY = 0;
        let zoomCenterX = 0; // Center for zooming
        let zoomCenterY = 0; // Center for zooming
        let fpsDisplay = document.getElementById('fps');

        // Handle zoom with mouse wheel
        canvas.addEventListener('wheel', (event) => {
            event.preventDefault();

            zoomCenterX = event.clientX - offsetX;
            zoomCenterY = event.clientY - offsetY;

            if (event.deltaY < 0) {
                scale *= scaleFactor;
                if (scale > maxScale) scale = maxScale;
            } else {
                scale /= scaleFactor;
                if (scale < minScale) scale = minScale;
            }
        });

        // Handle mouse down event for panning
        canvas.addEventListener('mousedown', (event) => {
            isDragging = true;
            startX = event.clientX;
            startY = event.clientY;
        });

        // Handle mouse move event for panning
        canvas.addEventListener('mousemove', (event) => {
            if (isDragging) {
                const dx = event.clientX - startX;
                const dy = event.clientY - startY;
                startX = event.clientX;
                startY = event.clientY;
                offsetX += dx;
                offsetY += dy;
            }
        });

        // Handle mouse up and mouse leave events to stop panning
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });

        // Animation loop
        let angle = 20;
        let lastTime = 0;
        function animate(time) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Apply transformations: translate for panning, then scale for zooming
            ctx.save();
            ctx.translate(offsetX, offsetY);
            ctx.translate(earth.x, earth.y);
            ctx.scale(scale, scale);
            ctx.translate(-earth.x, -earth.y);

            // Draw stars
            stars.forEach(star => {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                ctx.fillStyle = star.color;
                ctx.fill();
            });

            // Draw Earth
            ctx.beginPath();
            ctx.arc(earth.x, earth.y, earth.radius, 0, Math.PI * 2);
            ctx.fillStyle = earth.color;
            ctx.fill();

            // Draw and animate planets
            planets.forEach(planet => {
                const planetX = earth.x + planet.distance * Math.cos(angle * planet.speed);
                const planetY = earth.y + planet.distance * Math.sin(angle * planet.speed);

                // Draw orbit path
                ctx.beginPath();
                ctx.arc(earth.x, earth.y, planet.distance, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.stroke();

                // Draw planet
                ctx.beginPath();
                ctx.arc(planetX, planetY, planet.radius, 0, Math.PI * 2);
                ctx.fillStyle = planet.color;
                ctx.fill();

                // Draw planet label
                ctx.font = '12px Arial';
                ctx.fillStyle = 'white';
                ctx.fillText(planet.name, planetX + planet.radius + 3, planetY);
            });

            angle += 0.01;

            ctx.restore(); // Restore the state

            // Update zoom level display
            const zoomLevelDisplay = document.getElementById('zoom-level');
            if (zoomLevelDisplay) {
                zoomLevelDisplay.textContent = `Zoom: ${Math.round(scale * 100)}%`;
            }

            // Calculate FPS
            const currentTime = time;
            const deltaTime = currentTime - lastTime;
            lastTime = currentTime;
            const fps = Math.round(1000 / deltaTime);
            fpsDisplay.textContent = `FPS: ${fps}`;

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
